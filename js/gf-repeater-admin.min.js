function gfRepeater_editforms_getRepeaters(){var e,r=0,t=0,i=[];jQuery(".gfield").each(function(){if(0==r)jQuery(this).has(".gf-repeater-start").length&&(t+=1,gfRepeater_debug&&console.log("Repeater #"+t+" - Start: "+jQuery(this).attr("id")),e=this.id,r=1);else if(jQuery(this).has(".gf-repeater-end").length)gfRepeater_debug&&console.log("Repeater #"+t+" - End: "+jQuery(this).attr("id")),gfRepeater_repeaters[t]={startId:e,children:i},i=[],r=0;else{i.push(this),jQuery(this).addClass("gf-repeater-child");var a=gfRepeater_getField(jQuery(this).attr("id"));a.repeaterId=t,gfRepeater_debug&&console.log("Repeater #"+t+" - Child #"+i.length+" - Found: "+this.id)}})}function gfRepeater_getId(e){return e.substr(6)}function gfRepeater_getField(e){var r=gfRepeater_getId(e);return GetFieldById(r)}function gfRepeater_editforms_unsetRequired(e){var r=gfRepeater_getField(e.id);r.isRequired?(r.isRequired=!1,r.repeaterField_isRequired||gfRepeater_SetFieldRequired(!0,e)):r.repeaterField_isRequired&&gfRepeater_editforms_updateRequired(!0,e)}function gfRepeater_SetFieldRequired(e,r){r||(r=jQuery(".field_selected"));var t=jQuery(r).attr("id"),i=gfRepeater_getId(t),a=gfRepeater_getField(t);gfRepeater_editforms_updateRequired(e,r),a.repeaterField_isRequired=e;var d=a.repeaterId,f=gfRepeater_repeaters[d].startId,p=gfRepeater_getField(f),g=p.repeaterRequiredChildren,u=jQuery.inArray(i,g);u=-1==u?!1:!0,!u&&e?(g.push(i),p.repeaterRequiredChildren=g):u&&!e&&(g.splice(g.indexOf(i),1),p.repeaterRequiredChildren=g)}function gfRepeater_editforms_updateRequired(e,r){var t=e?"*":"";jQuery(r).find(".gfield_required").html(t)}function gfRepeater_editforms_init(){gfRepeater_editforms_getRepeaters(),jQuery.each(gfRepeater_repeaters,function(e){var r=e,t=gfRepeater_getField(gfRepeater_repeaters[r].startId);t.repeaterRequiredChildren||(t.repeaterRequiredChildren=[]),jQuery.each(gfRepeater_repeaters[r].children,function(){gfRepeater_editforms_unsetRequired(this)})})}function gfRepeater_editforms_updateClick(){jQuery(".gf-repeater-child").click(function(){var e=gfRepeater_getField(this.id),r=jQuery(this).find("input#field_required");r.attr("onclick","gfRepeater_SetFieldRequired(this.checked)"),e.repeaterField_isRequired&&r.prop("checked",!0)})}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_page=gf_repeater_js_admin_strings.page;jQuery(window).load(function(){"gf_edit_forms"==gfRepeater_page&&(gfRepeater_editforms_init(),gfRepeater_editforms_updateClick(),jQuery("#gform_fields").sortable({activate:function(){gfRepeater_editforms_init()}}))}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&jQuery.each(gfRepeater_repeaters,function(e){var r=e,t=gfRepeater_repeaters[r].startId,i=gfRepeater_getField(t),a=i.repeaterRequiredChildren;console.log("Repeater #"+r+" - Required Fields: "+a)})});