function gfRepeater_editforms_getRepeaters(){var e,r=0,t=0,i=[];jQuery(".gfield").each(function(){if(0==r)if(jQuery(this).has(".gf-repeater-start").length)t+=1,gfRepeater_debug&&console.log("Repeater #"+t+" - Start: "+jQuery(this).attr("id")),e=this.id,r=1;else{var d=gfRepeater_getField(jQuery(this).attr("id"));d.repeaterId&&(d.repeaterId=null)}else if(jQuery(this).has(".gf-repeater-end").length)gfRepeater_debug&&console.log("Repeater #"+t+" - End: "+jQuery(this).attr("id")),gfRepeater_repeaters[t]={startId:e,children:i},i=[],r=0;else{i.push(this);var d=gfRepeater_getField(jQuery(this).attr("id"));d.repeaterId=t,gfRepeater_debug&&console.log("Repeater #"+t+" - Child #"+i.length+" - Found: "+this.id)}})}function gfRepeater_getId(e){return e.substr(6)}function gfRepeater_getField(e){var r=gfRepeater_getId(e);return GetFieldById(r)}function gfRepeater_editforms_unsetRequired(e){var r=gfRepeater_getField(e.id);r.isRequired?(r.isRequired=!1,r.repeaterField_isRequired||gfRepeater_SetFieldRequired(!0,e)):r.repeaterField_isRequired&&gfRepeater_editforms_updateRequired(!0,e)}function gfRepeater_SetFieldRequired(e,r){r||(r=jQuery(".field_selected"));var t=jQuery(r).attr("id"),i=gfRepeater_getId(t),d=gfRepeater_getField(t);gfRepeater_editforms_updateRequired(e,r),d.repeaterField_isRequired=e;var a=d.repeaterId,p=gfRepeater_repeaters[a].startId,f=gfRepeater_getField(p),g=f.repeaterRequiredChildren,u=jQuery.inArray(i,g);u=-1==u?!1:!0,!u&&e?(g.push(i),f.repeaterRequiredChildren=g):u&&!e&&(g.splice(g.indexOf(i),1),f.repeaterRequiredChildren=g)}function gfRepeater_editforms_updateRequired(e,r){var t=e?"*":"";jQuery(r).find(".gfield_required").html(t)}function gfRepeater_editforms_updateClick(){jQuery(".gf-repeater-child").click(function(){var e=gfRepeater_getField(this.id),r=jQuery(this).find("input#field_required");r.attr("onclick","gfRepeater_SetFieldRequired(this.checked)"),e.repeaterField_isRequired&&r.prop("checked",!0)})}function gfRepeater_editforms_undoChild(e){var r=gfRepeater_getField(e.id),t=jQuery(e).find("input#field_required");jQuery(e).removeClass("gf-repeater-child"),t.attr("onclick","SetFieldRequired(this.checked)"),r.repeaterField_isRequired&&(r.repeaterField_isRequired=null,r.isRequired=!0)}function gfRepeater_editforms_refresh(e){if(gfRepeater_editforms_getRepeaters(),e){var r=gfRepeater_getField(e.id),t=gfRepeater_getId(e.id);r.repeaterId&&(jQuery(e).addClass("gf-repeater-child"),gfRepeater_editforms_unsetRequired(e),gfRepeater_debug&&console.log(e.id+" is a child of Repeater #"+r.repeaterId))}jQuery.each(gfRepeater_repeaters,function(i){var d=i,a=gfRepeater_getField(gfRepeater_repeaters[d].startId);a.repeaterRequiredChildren||(a.repeaterRequiredChildren=[]);var p=a.repeaterRequiredChildren;e&&!r.repeaterId&&-1!==jQuery.inArray(t,p)&&(gfRepeater_editforms_undoChild(e),p.splice(p.indexOf(t),1),a.repeaterRequiredChildren=p,gfRepeater_debug&&console.log(e.id+" is no longer a child of Repeater #"+d))}),gfRepeater_editforms_updateClick()}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_page=gf_repeater_js_admin_strings.page;jQuery(window).load(function(){"gf_edit_forms"==gfRepeater_page&&(gfRepeater_editforms_refresh(),jQuery("#gform_fields").sortable({stop:function(e,r){gfRepeater_editforms_refresh(r.item[0])}}))}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&jQuery.each(gfRepeater_repeaters,function(e){var r=e,t=gfRepeater_repeaters[r].startId,i=gfRepeater_getField(t),d=i.repeaterRequiredChildren;console.log("Repeater #"+r+" - Required Fields: "+d)})});