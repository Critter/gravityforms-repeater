function gfRepeater_getRepeaters(){var e=jQuery(".gform_wrapper").each(function(){var e,t,r={},a=this.id.split("_")[2],i=jQuery(this).children("form").first(),n=0,o=0,p=0,u=0,s={},d={},l={},c={};return"/ajax-test"==jQuery(i).attr("action")&&jQuery(i).removeAttr("action"),jQuery(this).find(".gfield").each(function(){if(0==o)jQuery(this).has(".ginput_container_repeater").length&&(n+=1,gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Start: "+jQuery(this).attr("id")),t=jQuery(this),e=t.find(".gform_repeater"),s=jQuery(e).val(),s&&(s=JSON.parse(s)),1==n&&(jQuery.captures()&&(c=jQuery.captures(e.attr("name")),c&&(c=JSON.parse(c),c.formId==a&&(gfRepeater_submitted=!0))),jQuery(i).capture()),o=1);else{if(jQuery(this).has(".ginput_container_repeater").length)return!1;if(jQuery(this).has(".ginput_container_repeater-end").length){gfRepeater_debug&&(console.log("Form #"+a+" - Repeater #"+n+" - End: "+jQuery(this).attr("id")),console.log("Form #"+a+" - Repeater #"+n+" - Children Found: "+p));var f={},g=jQuery(this),h=g.find(".gf_repeater_add"),_=g.find(".gf_repeater_remove"),R="gfRepeater_repeatRepeater("+a+","+n+");",y="gfRepeater_unrepeatRepeater("+a+","+n+");";jQuery(h).attr({onclick:R,onkeypress:R}),jQuery(_).attr({onclick:y,onkeypress:y}),f={add:h,remove:_,data:e,start:t,end:g};var m={},j=Number(s.start),Q=Number(s.min),v=Number(s.max);(!j||v&&j>v)&&(j=1),(!Q||v&&Q>v)&&(Q=1),(!v||Q&&v&&Q>v)&&(v=null),m={start:j,min:Q,max:v};var b={},C=Number(e.attr("tabindex")),k=null;gfRepeater_submitted&&c&&(k=c.repeatCount),b={repeatCount:1,prevRepeatCount:k,childrenCount:p,paremCount:u,tabIndex:C,inputData:l},r[n]={data:b,settings:m,controllers:f,children:d},o=0,p=0,u=0,d={},l={},repeaterChildrenPrePopulate={},repeaterRequiredChildren=null}else{p+=1;var I,x,w,N=jQuery(this),A=(jQuery(this).children(".gfield_label").text(),jQuery(this).attr("id")),L=A.split("_")[2],V={},D=[],P=0,E=!1;if(jQuery(this).has(".ginput_container").length){var F=jQuery(this).find(".ginput_container").attr("class").split(/\s+/),O="ginput_container_";jQuery.each(F,function(e,t){t.slice(0,O.length)==O&&(I=t.slice(O.length,t.length))})}else jQuery(this).hasClass("gform_hidden")?I="hidden":jQuery(this).hasClass("gsection")&&(I="section");s.children[L].required&&(E=!0),s.children[L].inputMask&&(x=s.children[L].inputMask),s.children[L].conditionalLogic&&(w=s.children[L].conditionalLogic,w.skip=[]),gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Child #"+p+" - Found: "+A),jQuery(this).find(":input").each(function(){P+=1;var e,t=jQuery(this),r=jQuery(this).attr("id"),i=jQuery(this).attr("name"),o=gfRepeater_getInputValue(t),d={};i&&(-1==jQuery.inArray(i,D)&&D.push(i),e="[]"==i.slice(-2)?i.slice(0,i.length-2):i,s.children[L].prePopulate&&("checkbox"==I||"radio"==I?d=s.children[L].prePopulate:s.children[L].prePopulate[e.split("_")[1]]&&(d=s.children[L].prePopulate[e.split("_")[1]]),d&&jQuery.each(d,function(e,t){e>u&&(u=Number(e))}))),V[P]={element:t,id:r,name:i,defaultValue:o,prePopulate:d},gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+n+" - Child #"+p+" - Input Found: "+r)}),d[p]={element:N,id:A,idNum:L,inputs:V,inputCount:P,required:E,type:I,inputMask:x,conditionalLogic:w},l[L]=D}}}),gfRepeater_debug&&console.log("Form #"+a+" - Repeaters Found: "+n),0!==o?!1:r?(gfRepeater_repeaters[a]=r,!0):void 0});return e?!0:!1}function gfRepeater_setRepeaterChildAttrs(e,t,r,a){if(!a)var a=gfRepeater_repeaters[e][t].data.repeatCount+1;var i=gfRepeater_repeaters[e][t],n=jQuery(r).attr("id").split("-")[0],o=gfRepeater_getIndex(i.children,"id",n);if(o){var p=!1,u=i.children[o],s=u.required,d=u.type,l=u.inputCount,c=u.inputMask,f=i.data.tabIndex,g=n+"-"+t+"-"+a;if(jQuery(r).attr("id",g),gfRepeater_replaceShortcodes(r),gfRepeater_doShortcode(r,"count",a),jQuery.each(i.children[o].inputs,function(e,n){var o=this.id,u=this.name,g="";if("radio"==d)var h=gfRepeater_findElementByIdOrName(r,null,o);else var h=gfRepeater_findElementByIdOrName(r,u,o);if(o){var _=o+"-"+t+"-"+a;jQuery(h).attr("id",_),jQuery(r).find("label[for^='"+o+"']").attr("for",_)}if(u){if("[]"==u.slice(-2))var R=u.slice(0,u.length-2)+"-"+t+"-"+a+"[]";else var R=u+"-"+t+"-"+a;jQuery(h).attr("name",R),jQuery(h).attr("tabindex",f)}if(c&&jQuery(h).mask(c),this.prePopulate[a]?g=this.prePopulate[a]:this.prePopulate[0]&&(g=this.prePopulate[0]),g&&(("checkbox"==d||"radio"==d)&&(prePopulateValues=g.split(","),g=-1!==jQuery.inArray(e,prePopulateValues)?!0:!1),gfRepeater_setInputValue(h,g)),window.gformInitDatepicker&&"date"==d&&2==l&&1==e&&(jQuery(h).removeClass("hasDatepicker"),jQuery(h).datepicker("destroy"),jQuery(h).siblings(".ui-datepicker-trigger").remove()),gfRepeater_submitted){if(R){var y=jQuery.captures(R);y&&gfRepeater_setInputValue(h,y)}if(s){var m=R.replace(".","_").split(/(_|-)/);if("name"==d&&-1==jQuery.inArray(m[4],["3","6"]))return!0;if("address"==d&&-1!==jQuery.inArray(m[4],["2"]))return!0;var j=gfRepeater_getInputValue(h);!j&&a<=i.data.prevRepeatCount&&(p=!0)}}}),s){var h=r.children(".gfield_label");r.addClass("gfield_contains_required"),h.has(".gfield_required").length||h.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&(p?(r.addClass("gfield_error"),r.has(".validation_message").length||r.append('<div class="gfield_description validation_message">This field is required.</div>')):(r.removeClass("gfield_error"),r.find(".validation_message").remove()))}}}function gfRepeater_conditionalLogic_set(e,t,r,a){gfRepeater_conditionalLogic_do(e,t,r,a);var i="-"+t+"-"+a,n=gfRepeater_repeaters[e][t],o=n.children[r],p=o.conditionalLogic;jQuery.each(p.rules,function(o,p){var u=p.fieldId,s=gfRepeater_getIndex(n.children,"idNum",u),d=n.children[s],l=d.id+i,c=jQuery("#"+l);jQuery.each(d.inputs,function(n,o){var p=o.id+i,u=o.name+i,s=gfRepeater_findElementByIdOrName(c,u,p);jQuery(s).on("change",function(){gfRepeater_conditionalLogic_do(e,t,r,a)})})})}function gfRepeater_conditionalLogic_do(e,t,r,a){var i="-"+t+"-"+a,n=gfRepeater_repeaters[e][t],o=n.children[r],p=o.conditionalLogic,u=o.id+i,s=jQuery("#"+u),d=[],l=!1,c=!1;if(jQuery.each(p.rules,function(e,t){var r=!1,a=t.fieldId,o=gfRepeater_getIndex(n.children,"idNum",a),p=n.children[o],u=p.id+i,s=jQuery("#"+u);if("checkbox"==p.type||"radio"==p.type){var l=gfRepeater_getChoiceValue(s);l=-1!==jQuery.inArray(t.value,l)?t.value:!1}else var c=p.inputs[1],f=c.id+i,g=c.name+i,h=gfRepeater_findElementByIdOrName(s,g,f),l=gfRepeater_getInputValue(h);switch(t.operator){case"is":l==t.value&&(r=!0);break;case"is_not":l!==t.value&&(r=!0);break;case"greater_than":l>t.value&&(r=!0);break;case"less_than":l<t.value&&(r=!0);break;case"contains":l.indexOf(t.value)>-1&&(r=!0);break;case"starts_with":l.substring(0,t.value.length)==t.value&&(r=!0);break;case"ends_with":l.substring(l.length-t.value.length,l.length)==t.value&&(r=!0)}d.push(r)}),"all"==p.logicType?-1==jQuery.inArray(!1,d)&&(l=!0):-1!==jQuery.inArray(!0,d)&&(l=!0),(l&&"show"!==p.actionType||!l&&"show"==p.actionType)&&(c=!0),c)s.hide(),-1==jQuery.inArray(a,p.skip)&&p.skip.push(a);else if(s.show(),-1!==jQuery.inArray(a,p.skip)){var f=p.skip.indexOf(a);p.skip.splice(f,1)}gfRepeater_updateDataElement(e,t)}function gfRepeater_doShortcode(e,t,r){e.find(".gfRepeater-shortcode-"+t).each(function(){jQuery(this).html(r)})}function gfRepeater_replaceShortcodes(e){var t=["count"],r=e.html();jQuery.each(t,function(t,a){e.html(r.replace("[gfRepeater-"+a+"]",'<span class="gfRepeater-shortcode-'+a+'"></span>'))})}function gfRepeater_repeatRepeater(e,t){var r=gfRepeater_repeaters[e][t];if(!(r.settings.max&&r.data.repeatCount>=r.settings.max)){jQuery(r.controllers.start).closest("form").trigger("beforeRepeat",[t,r.data.repeatCount+1]);var a=r.data.childrenCount,i=r.children[a].element;i=i.attr("id"),i=jQuery("#"+i.slice(0,-1)+gfRepeater_repeaters[e][t].data.repeatCount),jQuery.each(r.children,function(a,n){var o=jQuery(this.element).clone();gfRepeater_resetInputs(e,t,a,o),gfRepeater_setRepeaterChildAttrs(e,t,o),o.insertAfter(i),this.conditionalLogic&&gfRepeater_conditionalLogic_set(e,t,a,r.data.repeatCount+1),i=o}),r.data.repeatCount+=1,gfRepeater_updateDataElement(e,t),gfRepeater_updateRepeaterControls(e,t),window.gformInitDatepicker&&gformInitDatepicker(),jQuery(r.controllers.start).closest("form").trigger("afterRepeat",[t,r.data.repeatCount]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+t+" - repeated")}}function gfRepeater_unrepeatRepeater(e,t,r){var a=gfRepeater_repeaters[e][t];if(!(a.data.repeatCount<=a.settings.min)){if(!r)var r=a.data.repeatCount;jQuery(a.controllers.start).closest("form").trigger("beforeUnRepeat",[t,r]),jQuery.each(a.children,function(e,a){var i=jQuery("#"+this.id+"-"+t+"-"+r);jQuery(i).remove()}),a.data.repeatCount-=1,gfRepeater_updateDataElement(e,t),gfRepeater_updateRepeaterControls(e,t),jQuery(a.controllers.start).closest("form").trigger("afterUnRepeat",[t,r]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+t+" - Child #"+r+" - unrepeated")}}function gfRepeater_repeatRepeaterTimes(e,t,r){if(!r)var r=1;for(i=0;i<r;i++)gfRepeater_repeatRepeater(e,t)}function gfRepeater_unrepeatRepeaterTimes(e,t,r){if(!r)var r=1;for(i=0;i<r;i++)gfRepeater_unrepeatRepeater(e,t)}function gfRepeater_setRepeater(e,t,r){var a=gfRepeater_repeaters[e][t],i=a.data.repeatCount;if(r!=i)if(r>i){var n=r-i;gfRepeater_repeatRepeaterTimes(e,t,n)}else if(i>r){var n=i-r;gfRepeater_unrepeatRepeaterTimes(e,t,n)}}function gfRepeater_updateRepeaterControls(e,t){var r=gfRepeater_repeaters[e][t];r.settings.max&&(r.data.repeatCount>=r.settings.max?jQuery(r.controllers.add).hide():jQuery(r.controllers.add).show()),r.data.repeatCount<=r.settings.min?jQuery(r.controllers.remove).hide():jQuery(r.controllers.remove).show()}function gfRepeater_resetInputs(e,t,r,a){var i=gfRepeater_repeaters[e][t];jQuery.each(i.children[r].inputs,function(e,t){var r=this.id,i=this.name,n=this.defaultValue,o=gfRepeater_findElementByIdOrName(a,i,r);o&&gfRepeater_setInputValue(o,n)})}function gfRepeater_findElementByIdOrName(e,t,r){if(t)var a=jQuery(e).find("[name^='"+t+"']");if(!a&&r)var a=jQuery(e).find("[id^='"+r+"']");return a?a:!1}function gfRepeater_getIndex(e,t,r){var a;return jQuery.each(e,function(e,i){return i[t]==r?(a=e,!1):void 0}),a?a:!1}function gfRepeater_getChoiceValue(e){var t=[];return jQuery(e).find(":checkbox, :radio").each(function(){if(1==jQuery(this).prop("checked")){var e=(this.id,jQuery(this).siblings("label").first().text());t.push(e)}}),t}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked")?!0:!1:e.val()}function gfRepeater_setInputValue(e,t){e.is(":checkbox, :radio")?t?e.prop("checked",!0):e.prop("checked",!1):e.val(t)}function gfRepeater_updateDataElement(e,t){var r=gfRepeater_repeaters[e][t],a=jQuery(r.controllers.data),i=jQuery(a).val();i&&(i=JSON.parse(i)),i.repeaterId=t,i.repeatCount=r.data.repeatCount,jQuery.each(i.children,function(e,t){Array.isArray(this)&&(i.children[e]={});var a=r.data.inputData[e];a.length&&(i.children[e].inputs=a);var n=gfRepeater_getIndex(r.children,"idNum",e);i.children[e].conditionalLogic=r.children[n].conditionalLogic}),i=JSON.stringify(i),jQuery(a).val(i)}function gfRepeater_start(){jQuery.each(gfRepeater_repeaters,function(e,t){var r=e;jQuery.each(t,function(e,t){var a=e,i=gfRepeater_repeaters[r][a],n=i.settings.start,o=i.data.paremCount;i.controllers.data.attr("data-required")&&i.controllers.start.addClass("gfield_contains_required"),jQuery.each(i.children,function(e,t){gfRepeater_setRepeaterChildAttrs(r,a,jQuery(i.children[e].element),1),this.conditionalLogic&&gfRepeater_conditionalLogic_set(r,a,e,1)}),gfRepeater_submitted?n=i.data.prevRepeatCount:o>n&&(n=o),gfRepeater_setRepeater(r,a,n),gfRepeater_updateRepeaterControls(r,a),gfRepeater_updateDataElement(r,a)})}),window.gformInitDatepicker&&gformInitDatepicker()}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_submitted=!1;jQuery(document).bind("gform_post_render",function(){gfRepeater_getRepeaters()?gfRepeater_start():console.log("There was an error with one of your repeaters. This is usually caused by forgetting to include a repeater-end field or by trying to nest repeaters.")}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&console.log(jQuery.captures())});