function gfRepeater_getRepeaters(){var e=jQuery(".gform_wrapper").each(function(){var e,t,r,a={},p=this.id.split("_")[2],i=0,n=0,s=0,u=0,o={},f=[],d={},l=jQuery(this).children("form").first();return"/ajax-test"==jQuery(l).attr("action")&&jQuery(l).removeAttr("action"),jQuery(this).find(".gfield").each(function(){if(0==n){if(jQuery(this).has(".ginput_container_repeater").length){i+=1,gfRepeater_debug&&console.log("Form #"+p+" - Repeater #"+i+" - Start: "+jQuery(this).attr("id")),t=jQuery(this),e=t.find(".gform_hidden"),r=e.attr("data-required"),r=r?r.split(","):[];var l=e.attr("data-prepopulate");l&&(d=JSON.parse(l)),n=1}}else{if(jQuery(this).has(".ginput_container_repeater").length)return!1;if(jQuery(this).has(".ginput_container_repeater-end").length){gfRepeater_debug&&(console.log("Form #"+p+" - Repeater #"+i+" - End: "+jQuery(this).attr("id")),console.log("Form #"+p+" - Repeater #"+i+" - Children Found: "+s));var g={},c=jQuery(this),R=c.find(".gf_repeater_add"),_=c.find(".gf_repeater_remove"),h="gfRepeater_repeatRepeater("+p+","+i+");",y="gfRepeater_unrepeatRepeater("+p+","+i+");";jQuery(R).attr({onclick:h,onkeypress:h}),jQuery(_).attr({onclick:y,onkeypress:y}),g={add:R,remove:_,data:e,start:t,end:c};var m={},j=Number(e.attr("data-start")),Q=Number(e.attr("data-min")),v=Number(e.attr("data-max"));(!j||v&&j>v)&&(j=1),(!Q||v&&Q>v)&&(Q=1),(!v||Q&&v&&Q>v)&&(v=null),m={start:j,min:Q,max:v};var C={},b=Number(e.attr("tabindex")),k=null;if(gfRepeater_submitted){var I=jQuery.captures(e.attr("name"));I&&(k=JSON.parse(I).repeatCount)}C={repeatCount:1,prevRepeatCount:k,childrenCount:s,paremCount:u,tabIndex:b,inputData:f},a[i]={data:C,settings:m,controllers:g,children:o},n=0,s=0,u=0,o={},f=[],d={},r=null}else{s+=1;var w,x=jQuery(this),N=(jQuery(this).children(".gfield_label").text(),jQuery(this).attr("id")),D=N.split("_")[2],F={},V=[],A=0,q=!1;if(jQuery(this).has(".ginput_container").length){var E=jQuery(this).find(".ginput_container").attr("class").split(/\s+/),S="ginput_container_";jQuery.each(E,function(e,t){t.slice(0,S.length)==S&&(w=t.slice(S.length,t.length))})}else jQuery(this).hasClass("gform_hidden")?w="hidden":jQuery(this).hasClass("gsection")&&(w="section");-1!==jQuery.inArray(D,r)&&(q=!0),gfRepeater_debug&&console.log("Form #"+p+" - Repeater #"+i+" - Child #"+s+" - Found: "+N),jQuery(this).find(":input").each(function(){A+=1;var e,t=jQuery(this),r=jQuery(this).attr("id"),a=jQuery(this).attr("name"),n=gfRepeater_getInputValue(t),o={};a&&(-1==jQuery.inArray(a,V)&&V.push(a),e="[]"==a.slice(-2)?a.slice(0,a.length-2):a,"checkbox"!=w&&"radio"!=w||!d[D]?d[e.split("_")[1]]&&(o=d[e.split("_")[1]]):o=d[D],o&&jQuery.each(o,function(e,t){e>u&&(u=Number(e))})),F[A]={element:t,id:r,name:a,defaultValue:n,prePopulate:o},gfRepeater_debug&&console.log("Form #"+p+" - Repeater #"+i+" - Child #"+s+" - Input Found: "+r)}),o[s]={element:x,id:N,idNum:D,inputs:F,inputCount:A,required:q,type:w},"section"==w&&(V="section"),f.push({id:D,value:V})}}}),gfRepeater_debug&&console.log("Form #"+p+" - Repeaters Found: "+i),0!==n?!1:a?(gfRepeater_repeaters[p]=a,!0):void 0});return e?!0:!1}function gfRepeater_setRepeaterChildAttrs(e,t,r,a){if(!a)var a=gfRepeater_repeaters[e][t].data.repeatCount+1;var p,i=jQuery(r).attr("id").split("-")[0];if(jQuery.each(gfRepeater_repeaters[e][t].children,function(e,t){return this.id==i?void(p=e):void 0}),p){var n=!1,s=gfRepeater_repeaters[e][t].children[p].required,u=gfRepeater_repeaters[e][t].children[p].type,o=gfRepeater_repeaters[e][t].children[p].inputCount,f=gfRepeater_repeaters[e][t].data.tabIndex,d=i+"-"+t+"-"+a;if(jQuery(r).attr("id",d),gfRepeater_replaceShortcodes(r),gfRepeater_doShortcode(r,"count",a),jQuery.each(gfRepeater_repeaters[e][t].children[p].inputs,function(p,i){var d=this.id,l=this.name,g="";if("radio"==u)var c=gfRepeater_findElementByIdOrName(r,null,d);else var c=gfRepeater_findElementByIdOrName(r,l,d);if(d){var R=d+"-"+t+"-"+a;jQuery(c).attr("id",R),jQuery(r).find("label[for^='"+d+"']").attr("for",R)}if(l){if("[]"==l.slice(-2))var _=l.slice(0,l.length-2)+"-"+t+"-"+a+"[]";else var _=l+"-"+t+"-"+a;jQuery(c).attr("name",_),jQuery(c).attr("tabindex",f)}var h=jQuery(c).attr("data-mask");if(h&&jQuery(c).mask(h),this.prePopulate[a]?g=this.prePopulate[a]:this.prePopulate[0]&&(g=this.prePopulate[0]),g&&(("checkbox"==u||"radio"==u)&&(prePopulateValues=g.split(","),g=-1!==jQuery.inArray(p,prePopulateValues)?!0:!1),gfRepeater_setInputValue(c,g)),window.gformInitDatepicker&&"date"==u&&2==o&&1==p&&(jQuery(c).removeClass("hasDatepicker"),jQuery(c).datepicker("destroy"),jQuery(c).siblings(".ui-datepicker-trigger").remove()),gfRepeater_submitted){if(_){var y=jQuery.captures(_);y&&gfRepeater_setInputValue(c,y)}if(s){var m=_.replace(".","_").split(/(_|-)/);if("name"==u&&-1==jQuery.inArray(m[4],["3","6"]))return!0;if("address"==u&&-1!==jQuery.inArray(m[4],["2"]))return!0;var j=gfRepeater_getInputValue(c);!j&&a<=gfRepeater_repeaters[e][t].data.prevRepeatCount&&(n=!0)}}}),s){var l=r.children(".gfield_label");r.addClass("gfield_contains_required"),l.has(".gfield_required").length||l.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&(n?(r.addClass("gfield_error"),r.append('<div class="gfield_description validation_message">This field is required.</div>')):(r.removeClass("gfield_error"),r.find(".validation_message").remove()))}}}function gfRepeater_doShortcode(e,t,r){e.find(".gfRepeater-shortcode-"+t).each(function(){jQuery(this).html(r)})}function gfRepeater_replaceShortcodes(e){var t=["count"],r=e.html();jQuery.each(t,function(t,a){e.html(r.replace("[gfRepeater-"+a+"]",'<span class="gfRepeater-shortcode-'+a+'"></span>'))})}function gfRepeater_repeatRepeater(e,t){if(!(gfRepeater_repeaters[e][t].settings.max&&gfRepeater_repeaters[e][t].data.repeatCount>=gfRepeater_repeaters[e][t].settings.max)){jQuery(gfRepeater_repeaters[e][t].controllers.start).closest("form").trigger("beforeRepeat",[t,gfRepeater_repeaters[e][t].data.repeatCount+1]);var r=gfRepeater_repeaters[e][t].data.childrenCount,a=gfRepeater_repeaters[e][t].children[r].element;a=a.attr("id"),a=jQuery("#"+a.slice(0,-1)+gfRepeater_repeaters[e][t].data.repeatCount),jQuery.each(gfRepeater_repeaters[e][t].children,function(r,p){var i=jQuery(this.element).clone();gfRepeater_resetInputs(e,t,r,i),gfRepeater_setRepeaterChildAttrs(e,t,i),i.insertAfter(a),a=i}),gfRepeater_repeaters[e][t].data.repeatCount+=1,gfRepeater_updateDataElement(e,t),gfRepeater_updateRepeaterControls(e,t),window.gformInitDatepicker&&gformInitDatepicker(),jQuery(gfRepeater_repeaters[e][t].controllers.start).closest("form").trigger("afterRepeat",[t,gfRepeater_repeaters[e][t].data.repeatCount]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+t+" - repeated")}}function gfRepeater_unrepeatRepeater(e,t,r){if(!(gfRepeater_repeaters[e][t].data.repeatCount<=gfRepeater_repeaters[e][t].settings.min)){if(!r)var r=gfRepeater_repeaters[e][t].data.repeatCount;jQuery(gfRepeater_repeaters[e][t].controllers.start).closest("form").trigger("beforeUnRepeat",[t,r]),jQuery.each(gfRepeater_repeaters[e][t].children,function(e,a){var p=jQuery("#"+this.id+"-"+t+"-"+r);jQuery(p).remove()}),gfRepeater_repeaters[e][t].data.repeatCount-=1,gfRepeater_updateDataElement(e,t),gfRepeater_updateRepeaterControls(e,t),jQuery(gfRepeater_repeaters[e][t].controllers.start).closest("form").trigger("afterUnRepeat",[t,r]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+t+" - Child #"+r+" - unrepeated")}}function gfRepeater_repeatRepeaterTimes(e,t,r){if(!r)var r=1;for(i=0;i<r;i++)gfRepeater_repeatRepeater(e,t)}function gfRepeater_unrepeatRepeaterTimes(e,t,r){if(!r)var r=1;for(i=0;i<r;i++)gfRepeater_unrepeatRepeater(e,t)}function gfRepeater_setRepeater(e,t,r){var a=gfRepeater_repeaters[e][t].data.repeatCount;if(r!=a)if(r>a){var p=r-a;gfRepeater_repeatRepeaterTimes(e,t,p)}else if(a>r){var p=a-r;gfRepeater_unrepeatRepeaterTimes(e,t,p)}}function gfRepeater_updateRepeaterControls(e,t){gfRepeater_repeaters[e][t].settings.max&&(gfRepeater_repeaters[e][t].data.repeatCount>=gfRepeater_repeaters[e][t].settings.max?jQuery(gfRepeater_repeaters[e][t].controllers.add).hide():jQuery(gfRepeater_repeaters[e][t].controllers.add).show()),gfRepeater_repeaters[e][t].data.repeatCount<=gfRepeater_repeaters[e][t].settings.min?jQuery(gfRepeater_repeaters[e][t].controllers.remove).hide():jQuery(gfRepeater_repeaters[e][t].controllers.remove).show()}function gfRepeater_resetInputs(e,t,r,a){jQuery.each(gfRepeater_repeaters[e][t].children[r].inputs,function(e,t){var r=this.id,p=this.name,i=this.defaultValue,n=gfRepeater_findElementByIdOrName(a,p,r);n&&gfRepeater_setInputValue(n,i)})}function gfRepeater_findElementByIdOrName(e,t,r){if(t)var a=jQuery(e).find("[name^='"+t+"']");if(!a&&r)var a=jQuery(e).find("[id^='"+r+"']");return a?a:!1}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked")?!0:!1:e.val()}function gfRepeater_setInputValue(e,t){e.is(":checkbox, :radio")?t?e.prop("checked",!0):e.prop("checked",!1):e.val(t)}function gfRepeater_updateDataElement(e,t){var r=jQuery(gfRepeater_repeaters[e][t].controllers.data),a=JSON.stringify({repeaterId:t,repeatCount:gfRepeater_repeaters[e][t].data.repeatCount,inputData:gfRepeater_repeaters[e][t].data.inputData});jQuery(r).val(a)}function gfRepeater_start(){jQuery.each(gfRepeater_repeaters,function(e,t){var r=e;jQuery.each(t,function(e,t){var a=e,p=this.settings.start,i=this.data.paremCount;this.controllers.data.attr("data-required")&&this.controllers.start.addClass("gfield_contains_required"),jQuery.each(gfRepeater_repeaters[r][a].children,function(e,t){gfRepeater_setRepeaterChildAttrs(r,a,jQuery(gfRepeater_repeaters[r][a].children[e].element),1)}),gfRepeater_submitted?p=this.data.prevRepeatCount:i>p&&(p=i),gfRepeater_setRepeater(r,a,p),gfRepeater_updateRepeaterControls(r,a)})}),window.gformInitDatepicker&&gformInitDatepicker()}function gfRepeater_patchMask(){var e=jQuery.fn.mask;jQuery.fn.mask=function(t){return jQuery(this.get(0)).attr("data-mask",t),e.apply(this,arguments)}}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_submitted=!1;jQuery(window).load(function(){gfRepeater_getRepeaters()?gfRepeater_start():console.log("There was an error with one of your repeaters. This is usually caused by forgetting to include a repeater-end field or by trying to nest repeaters.")}),jQuery(document).ready(function(e){gfRepeater_patchMask(),jQuery(".gform_wrapper form").capture(),jQuery.captures()&&(gfRepeater_submitted=!0)}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&console.log(jQuery.captures())});