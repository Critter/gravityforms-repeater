function gfRepeater_getRepeaters(){var e,t,r,a=0,p=0,n=0,i={},s={};jQuery(".gfield").each(function(){if(0==p)jQuery(this).has(".ginput_container_repeater").length&&(a+=1,gfRepeater_debug&&console.log("Repeater #"+a+" - Start: "+jQuery(this).attr("id")),t=jQuery(this),e=t.find(".gform_hidden"),r=e.attr("data-required"),r=r.split(","),p=1);else if(jQuery(this).has(".ginput_container_repeater-end").length){gfRepeater_debug&&(console.log("Repeater #"+a+" - End: "+jQuery(this).attr("id")),console.log("Repeater #"+a+" - Children Found: "+n));var u={},d=jQuery(this),f=d.find(".gf-repeater-add"),g=d.find(".gf-repeater-remove");jQuery(f).attr("onClick","gfRepeater_repeatRepeater("+a+");"),jQuery(g).attr("onClick","gfRepeater_unrepeatRepeater("+a+");"),u={add:f,remove:g,data:e,start:t,end:d};var o={},l=e.attr("data-start"),R=e.attr("data-min"),_=e.attr("data-max");l||(l=1),R||(R=1),R>_&&(_=null),o={start:l,min:R,max:_};var c={};if(gfRepeater_submitted)var h=JSON.parse(jQuery.captures(e.attr("name"))).repeatCount;else var h=null;c={repeatCount:1,prevRepeatCount:h,childrenCount:n,inputData:s},gfRepeater_repeaters[a]={data:c,settings:o,controllers:u,children:i},gfRepeater_updateDataElement(a),p=0,n=0,i={},s={},r=null}else{n+=1;var y=jQuery(this),m=jQuery(this).children(".gfield_label").text(),j=jQuery(this).attr("id"),Q=j.split("_")[2],v={},C=[],b=0,k=!1;-1!==jQuery.inArray(Q,r)&&(k=!0),gfRepeater_debug&&console.log("Repeater #"+a+" - Child #"+n+" - Found: "+j),jQuery(this).find(":input").each(function(){b+=1;var e=jQuery(this),t=jQuery(this).attr("id"),r=jQuery(this).attr("name"),p=gfRepeater_getInputValue(e);r&&-1==jQuery.inArray(r,C)&&C.push(r),v[b]={element:e,id:t,name:r,defaultValue:p},gfRepeater_debug&&console.log("Repeater #"+a+" - Child #"+n+" - Input Found: "+t)}),i[n]={element:y,id:j,inputs:v,inputCount:b,required:k},s[m]=C}}),gfRepeater_debug&&console.log("Repeaters Found: "+a)}function gfRepeater_setRepeaterChildAttrs(e,t,r){if(!r)var r=gfRepeater_repeaters[t].data.repeatCount+1;var a,p=jQuery(e).attr("id").split("-")[0];if(jQuery.each(gfRepeater_repeaters[t].children,function(e){return this.id==p?void(a=e):void 0}),a){var n=p+"-"+t+"-"+r;if(jQuery(e).attr("id",n),gfRepeater_repeaters[t].children[a].required){var i=e.children(".gfield_label");e.addClass("gfield_contains_required"),i.has(".gfield_required").length||i.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&!e.hasClass("gfield_error")&&gfRepeater_childValidation(t,a)}jQuery.each(gfRepeater_repeaters[t].children[a].inputs,function(){var a=this.id,p=this.name,n=gfRepeater_findElementByIdOrName(e,a,p);if(a){var i=a+"-"+t+"-"+r;jQuery(n).attr("id",i),jQuery(e).find("label[for^='"+a+"']").attr("for",i)}if(p){var s=p+"-"+t+"-"+r;jQuery(n).attr("name",s)}var u=jQuery(n).attr("data-mask");if(u&&jQuery(n).mask(u),gfRepeater_submitted&&s){var d=jQuery.captures(s);d&&gfRepeater_setInputValue(n,d)}})}}function gfRepeater_repeatRepeater(e){if(!(gfRepeater_repeaters[e].settings.max&&gfRepeater_repeaters[e].data.repeatCount>=gfRepeater_repeaters[e].settings.max)){var t=gfRepeater_repeaters[e].data.childrenCount,r=gfRepeater_repeaters[e].children[t].element;r=r.attr("id"),r=jQuery("#"+r.slice(0,-1)+gfRepeater_repeaters[e].data.repeatCount),jQuery.each(gfRepeater_repeaters[e].children,function(t){var a=jQuery(this.element).clone();gfRepeater_resetInputs(e,t,a),gfRepeater_setRepeaterChildAttrs(a,e),gfRepeater_submitted&&gfRepeater_repeaters[e].data.repeatCount>=gfRepeater_repeaters[e].data.prevRepeatCount&&(a.removeClass("gfield_error"),a.find(".validation_message").remove()),a.insertAfter(r),r=a}),gfRepeater_repeaters[e].data.repeatCount+=1,gfRepeater_updateDataElement(e),gfRepeater_updateRepeaterControls(e),gfRepeater_debug&&console.log("Repeater #"+e+" - repeated")}}function gfRepeater_unrepeatRepeater(e,t){if(!(gfRepeater_repeaters[e].data.repeatCount<=gfRepeater_repeaters[e].settings.min)){if(!t)var t=gfRepeater_repeaters[e].data.repeatCount;jQuery.each(gfRepeater_repeaters[e].children,function(){var r=jQuery("#"+this.id+"-"+e+"-"+t);jQuery(r).remove()}),gfRepeater_repeaters[e].data.repeatCount-=1,gfRepeater_updateDataElement(e),gfRepeater_updateRepeaterControls(e),gfRepeater_debug&&console.log("Repeater #"+e+" - Child #"+t+" - unrepeated")}}function gfRepeater_updateRepeaterControls(e){gfRepeater_repeaters[e].settings.max&&(gfRepeater_repeaters[e].data.repeatCount==gfRepeater_repeaters[e].settings.max?jQuery(gfRepeater_repeaters[e].controllers.add).hide():jQuery(gfRepeater_repeaters[e].controllers.add).show()),gfRepeater_repeaters[e].data.repeatCount==gfRepeater_repeaters[e].settings.min?jQuery(gfRepeater_repeaters[e].controllers.remove).hide():jQuery(gfRepeater_repeaters[e].controllers.remove).show()}function gfRepeater_childValidation(e,t){if(gfRepeater_repeaters[e].children[t].required){var r=!1;if(jQuery.each(gfRepeater_repeaters[e].children[t].inputs,function(){var e=this.element,t=gfRepeater_getInputValue(e);t&&(r=!0)}),!r){var a=gfRepeater_repeaters[e].children[t].element;a.addClass("gfield_error"),a.append('<div class="gfield_description validation_message">This field is required.</div>')}}}function gfRepeater_resetInputs(e,t,r){jQuery.each(gfRepeater_repeaters[e].children[t].inputs,function(){var e=this.id,t=this.name,a=this.defaultValue,p=gfRepeater_findElementByIdOrName(r,e,t);p&&gfRepeater_setInputValue(p,a)})}function gfRepeater_findElementByIdOrName(e,t,r){if(t)var a=jQuery(e).find("[id^='"+t+"']");else{if(!r)return!1;var a=jQuery(e).find("[name^='"+r+"']")}return a?a:!1}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked")?!0:!1:e.val()}function gfRepeater_setInputValue(e,t){e.is(":checkbox, :radio")?t?e.prop("checked",!0):e.prop("checked",!1):e.val(t)}function gfRepeater_updateDataElement(e){var t=jQuery(gfRepeater_repeaters[e].controllers.data),r=JSON.stringify({repeaterId:e,repeatCount:gfRepeater_repeaters[e].data.repeatCount,inputData:gfRepeater_repeaters[e].data.inputData});jQuery(t).val(r)}function gfRepeater_start(){jQuery.each(gfRepeater_repeaters,function(e){var t=e,r=this.settings.start;for(this.controllers.data.attr("data-required")&&this.controllers.start.addClass("gfield_contains_required"),jQuery.each(gfRepeater_repeaters[t].children,function(e){gfRepeater_setRepeaterChildAttrs(jQuery(gfRepeater_repeaters[t].children[e].element),t,1)}),gfRepeater_submitted&&(r=this.data.prevRepeatCount),i=1;i<r;i++)gfRepeater_repeatRepeater(t);gfRepeater_updateRepeaterControls(t)})}function gfRepeater_patchMask(){var e=jQuery.fn.mask;jQuery.fn.mask=function(t){return jQuery(this.get(0)).attr("data-mask",t),e.apply(this,arguments)}}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_submitted=!1;jQuery(window).load(function(){gfRepeater_getRepeaters(),gfRepeater_start()}),jQuery(document).ready(function(){gfRepeater_patchMask(),jQuery(".gform_wrapper form").capture(),jQuery.captures()&&(gfRepeater_submitted=!0)}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&console.log(jQuery.captures())});