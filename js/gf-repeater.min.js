function gfRepeater_getRepeaters(){var e=jQuery(".gform_wrapper").each(function(){var e,r,t={},a=this.id.split("_")[2],p=jQuery(this).children("form").first(),i=0,n=0,s=0,u=0,o={},f={},d={},l={};return"/ajax-test"==jQuery(p).attr("action")&&jQuery(p).removeAttr("action"),jQuery(this).find(".gfield").each(function(){if(0==n)jQuery(this).has(".ginput_container_repeater").length&&(i+=1,gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+i+" - Start: "+jQuery(this).attr("id")),r=jQuery(this),e=r.find(".gform_repeater"),o=jQuery(e).val(),o&&(o=JSON.parse(o)),1==i&&(jQuery.captures()&&(l=jQuery.captures(e.attr("name")),l&&(l=JSON.parse(l),l.formId==a&&(gfRepeater_submitted=!0))),jQuery(p).capture()),n=1);else{if(jQuery(this).has(".ginput_container_repeater").length)return!1;if(jQuery(this).has(".ginput_container_repeater-end").length){gfRepeater_debug&&(console.log("Form #"+a+" - Repeater #"+i+" - End: "+jQuery(this).attr("id")),console.log("Form #"+a+" - Repeater #"+i+" - Children Found: "+s));var g={},c=jQuery(this),R=c.find(".gf_repeater_add"),_=c.find(".gf_repeater_remove"),h="gfRepeater_repeatRepeater("+a+","+i+");",y="gfRepeater_unrepeatRepeater("+a+","+i+");";jQuery(R).attr({onclick:h,onkeypress:h}),jQuery(_).attr({onclick:y,onkeypress:y}),g={add:R,remove:_,data:e,start:r,end:c};var m={},j=Number(o.start),Q=Number(o.min),v=Number(o.max);(!j||v&&j>v)&&(j=1),(!Q||v&&Q>v)&&(Q=1),(!v||Q&&v&&Q>v)&&(v=null),m={start:j,min:Q,max:v};var C={},b=Number(e.attr("tabindex")),k=null;gfRepeater_submitted&&l&&(k=l.repeatCount),C={repeatCount:1,prevRepeatCount:k,childrenCount:s,paremCount:u,tabIndex:b,inputData:d},t[i]={data:C,settings:m,controllers:g,children:f},n=0,s=0,u=0,f={},d={},repeaterChildrenPrePopulate={},repeaterRequiredChildren=null}else{s+=1;var I,w,x=jQuery(this),N=(jQuery(this).children(".gfield_label").text(),jQuery(this).attr("id")),P=N.split("_")[2],D={},F=[],A=0,V=!1;if(jQuery(this).has(".ginput_container").length){var q=jQuery(this).find(".ginput_container").attr("class").split(/\s+/),E="ginput_container_";jQuery.each(q,function(e,r){r.slice(0,E.length)==E&&(I=r.slice(E.length,r.length))})}else jQuery(this).hasClass("gform_hidden")?I="hidden":jQuery(this).hasClass("gsection")&&(I="section");o.children[P].required&&(V=!0),o.children[P].inputMask&&(w=o.children[P].inputMask),gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+i+" - Child #"+s+" - Found: "+N),jQuery(this).find(":input").each(function(){A+=1;var e,r=jQuery(this),t=jQuery(this).attr("id"),p=jQuery(this).attr("name"),n=gfRepeater_getInputValue(r),f={};p&&(-1==jQuery.inArray(p,F)&&F.push(p),e="[]"==p.slice(-2)?p.slice(0,p.length-2):p,o.children[P].prePopulate&&("checkbox"==I||"radio"==I?f=o.children[P].prePopulate:o.children[P].prePopulate[e.split("_")[1]]&&(f=o.children[P].prePopulate[e.split("_")[1]]),f&&jQuery.each(f,function(e,r){e>u&&(u=Number(e))}))),D[A]={element:r,id:t,name:p,defaultValue:n,prePopulate:f},gfRepeater_debug&&console.log("Form #"+a+" - Repeater #"+i+" - Child #"+s+" - Input Found: "+t)}),f[s]={element:x,id:N,idNum:P,inputs:D,inputCount:A,required:V,type:I,inputMask:w},d[P]=F}}}),gfRepeater_debug&&console.log("Form #"+a+" - Repeaters Found: "+i),0!==n?!1:t?(gfRepeater_repeaters[a]=t,!0):void 0});return e?!0:!1}function gfRepeater_setRepeaterChildAttrs(e,r,t,a){if(!a)var a=gfRepeater_repeaters[e][r].data.repeatCount+1;var p,i=jQuery(t).attr("id").split("-")[0];if(jQuery.each(gfRepeater_repeaters[e][r].children,function(e,r){return this.id==i?void(p=e):void 0}),p){var n=!1,s=gfRepeater_repeaters[e][r].children[p].required,u=gfRepeater_repeaters[e][r].children[p].type,o=gfRepeater_repeaters[e][r].children[p].inputCount,f=gfRepeater_repeaters[e][r].children[p].inputMask,d=gfRepeater_repeaters[e][r].data.tabIndex,l=i+"-"+r+"-"+a;if(jQuery(t).attr("id",l),gfRepeater_replaceShortcodes(t),gfRepeater_doShortcode(t,"count",a),jQuery.each(gfRepeater_repeaters[e][r].children[p].inputs,function(p,i){var l=this.id,g=this.name,c="";if("radio"==u)var R=gfRepeater_findElementByIdOrName(t,null,l);else var R=gfRepeater_findElementByIdOrName(t,g,l);if(l){var _=l+"-"+r+"-"+a;jQuery(R).attr("id",_),jQuery(t).find("label[for^='"+l+"']").attr("for",_)}if(g){if("[]"==g.slice(-2))var h=g.slice(0,g.length-2)+"-"+r+"-"+a+"[]";else var h=g+"-"+r+"-"+a;jQuery(R).attr("name",h),jQuery(R).attr("tabindex",d)}if(f&&jQuery(R).mask(f),this.prePopulate[a]?c=this.prePopulate[a]:this.prePopulate[0]&&(c=this.prePopulate[0]),c&&(("checkbox"==u||"radio"==u)&&(prePopulateValues=c.split(","),c=-1!==jQuery.inArray(p,prePopulateValues)?!0:!1),gfRepeater_setInputValue(R,c)),window.gformInitDatepicker&&"date"==u&&2==o&&1==p&&(jQuery(R).removeClass("hasDatepicker"),jQuery(R).datepicker("destroy"),jQuery(R).siblings(".ui-datepicker-trigger").remove()),gfRepeater_submitted){if(h){var y=jQuery.captures(h);y&&gfRepeater_setInputValue(R,y)}if(s){var m=h.replace(".","_").split(/(_|-)/);if("name"==u&&-1==jQuery.inArray(m[4],["3","6"]))return!0;if("address"==u&&-1!==jQuery.inArray(m[4],["2"]))return!0;var j=gfRepeater_getInputValue(R);!j&&a<=gfRepeater_repeaters[e][r].data.prevRepeatCount&&(n=!0)}}}),s){var g=t.children(".gfield_label");t.addClass("gfield_contains_required"),g.has(".gfield_required").length||g.append('<span class="gfield_required">*</span>'),gfRepeater_submitted&&(n?(t.addClass("gfield_error"),t.has(".validation_message").length||t.append('<div class="gfield_description validation_message">This field is required.</div>')):(t.removeClass("gfield_error"),t.find(".validation_message").remove()))}}}function gfRepeater_doShortcode(e,r,t){e.find(".gfRepeater-shortcode-"+r).each(function(){jQuery(this).html(t)})}function gfRepeater_replaceShortcodes(e){var r=["count"],t=e.html();jQuery.each(r,function(r,a){e.html(t.replace("[gfRepeater-"+a+"]",'<span class="gfRepeater-shortcode-'+a+'"></span>'))})}function gfRepeater_repeatRepeater(e,r){if(!(gfRepeater_repeaters[e][r].settings.max&&gfRepeater_repeaters[e][r].data.repeatCount>=gfRepeater_repeaters[e][r].settings.max)){jQuery(gfRepeater_repeaters[e][r].controllers.start).closest("form").trigger("beforeRepeat",[r,gfRepeater_repeaters[e][r].data.repeatCount+1]);var t=gfRepeater_repeaters[e][r].data.childrenCount,a=gfRepeater_repeaters[e][r].children[t].element;a=a.attr("id"),a=jQuery("#"+a.slice(0,-1)+gfRepeater_repeaters[e][r].data.repeatCount),jQuery.each(gfRepeater_repeaters[e][r].children,function(t,p){var i=jQuery(this.element).clone();gfRepeater_resetInputs(e,r,t,i),gfRepeater_setRepeaterChildAttrs(e,r,i),i.insertAfter(a),a=i}),gfRepeater_repeaters[e][r].data.repeatCount+=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),window.gformInitDatepicker&&gformInitDatepicker(),jQuery(gfRepeater_repeaters[e][r].controllers.start).closest("form").trigger("afterRepeat",[r,gfRepeater_repeaters[e][r].data.repeatCount]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+r+" - repeated")}}function gfRepeater_unrepeatRepeater(e,r,t){if(!(gfRepeater_repeaters[e][r].data.repeatCount<=gfRepeater_repeaters[e][r].settings.min)){if(!t)var t=gfRepeater_repeaters[e][r].data.repeatCount;jQuery(gfRepeater_repeaters[e][r].controllers.start).closest("form").trigger("beforeUnRepeat",[r,t]),jQuery.each(gfRepeater_repeaters[e][r].children,function(e,a){var p=jQuery("#"+this.id+"-"+r+"-"+t);jQuery(p).remove()}),gfRepeater_repeaters[e][r].data.repeatCount-=1,gfRepeater_updateDataElement(e,r),gfRepeater_updateRepeaterControls(e,r),jQuery(gfRepeater_repeaters[e][r].controllers.start).closest("form").trigger("afterUnRepeat",[r,t]),gfRepeater_debug&&console.log("Form #"+e+" - Repeater #"+r+" - Child #"+t+" - unrepeated")}}function gfRepeater_repeatRepeaterTimes(e,r,t){if(!t)var t=1;for(i=0;i<t;i++)gfRepeater_repeatRepeater(e,r)}function gfRepeater_unrepeatRepeaterTimes(e,r,t){if(!t)var t=1;for(i=0;i<t;i++)gfRepeater_unrepeatRepeater(e,r)}function gfRepeater_setRepeater(e,r,t){var a=gfRepeater_repeaters[e][r].data.repeatCount;if(t!=a)if(t>a){var p=t-a;gfRepeater_repeatRepeaterTimes(e,r,p)}else if(a>t){var p=a-t;gfRepeater_unrepeatRepeaterTimes(e,r,p)}}function gfRepeater_updateRepeaterControls(e,r){gfRepeater_repeaters[e][r].settings.max&&(gfRepeater_repeaters[e][r].data.repeatCount>=gfRepeater_repeaters[e][r].settings.max?jQuery(gfRepeater_repeaters[e][r].controllers.add).hide():jQuery(gfRepeater_repeaters[e][r].controllers.add).show()),gfRepeater_repeaters[e][r].data.repeatCount<=gfRepeater_repeaters[e][r].settings.min?jQuery(gfRepeater_repeaters[e][r].controllers.remove).hide():jQuery(gfRepeater_repeaters[e][r].controllers.remove).show()}function gfRepeater_resetInputs(e,r,t,a){jQuery.each(gfRepeater_repeaters[e][r].children[t].inputs,function(e,r){var t=this.id,p=this.name,i=this.defaultValue,n=gfRepeater_findElementByIdOrName(a,p,t);n&&gfRepeater_setInputValue(n,i)})}function gfRepeater_findElementByIdOrName(e,r,t){if(r)var a=jQuery(e).find("[name^='"+r+"']");if(!a&&t)var a=jQuery(e).find("[id^='"+t+"']");return a?a:!1}function gfRepeater_getInputValue(e){return e.is(":checkbox, :radio")?1==e.prop("checked")?!0:!1:e.val()}function gfRepeater_setInputValue(e,r){e.is(":checkbox, :radio")?r?e.prop("checked",!0):e.prop("checked",!1):e.val(r)}function gfRepeater_updateDataElement(e,r){var t=jQuery(gfRepeater_repeaters[e][r].controllers.data),a=jQuery(t).val();a&&(a=JSON.parse(a)),a.repeaterId=r,a.repeatCount=gfRepeater_repeaters[e][r].data.repeatCount,jQuery.each(a.children,function(t,p){Array.isArray(this)&&(a.children[t]={});var i=gfRepeater_repeaters[e][r].data.inputData[t];i.length&&(a.children[t].inputs=i)}),a=JSON.stringify(a),jQuery(t).val(a)}function gfRepeater_start(){jQuery.each(gfRepeater_repeaters,function(e,r){var t=e;jQuery.each(r,function(e,r){var a=e,p=this.settings.start,i=this.data.paremCount;this.controllers.data.attr("data-required")&&this.controllers.start.addClass("gfield_contains_required"),jQuery.each(gfRepeater_repeaters[t][a].children,function(e,r){gfRepeater_setRepeaterChildAttrs(t,a,jQuery(gfRepeater_repeaters[t][a].children[e].element),1)}),gfRepeater_submitted?p=this.data.prevRepeatCount:i>p&&(p=i),gfRepeater_setRepeater(t,a,p),gfRepeater_updateRepeaterControls(t,a),gfRepeater_updateDataElement(t,a)})}),window.gformInitDatepicker&&gformInitDatepicker()}var gfRepeater_debug=!1,gfRepeater_repeaters={},gfRepeater_submitted=!1;jQuery(document).bind("gform_post_render",function(){gfRepeater_getRepeaters()?gfRepeater_start():console.log("There was an error with one of your repeaters. This is usually caused by forgetting to include a repeater-end field or by trying to nest repeaters.")}),gfRepeater_debug&&jQuery(window).keydown(function(e){38==e.which&&console.log(gfRepeater_repeaters),40==e.which&&console.log(jQuery.captures())});